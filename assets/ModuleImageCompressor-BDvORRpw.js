const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ButtonForImages-CTRLgRDC.js","assets/index-BzWhoWJG.js","assets/index-DiWuM_TC.css","assets/index-Cmq54cEr.js"])))=>i.map(i=>d[i]);
import{r as p,_ as H,j as s,R as V}from"./index-BzWhoWJG.js";var U={exports:{}},$=U.exports,A;function W(){return A||(A=1,function(I,R){(function(v,h){I.exports=h()})($,function(){return function(v){var h={};function d(c){if(h[c])return h[c].exports;var u=h[c]={i:c,l:!1,exports:{}};return v[c].call(u.exports,u,u.exports,d),u.l=!0,u.exports}return d.m=v,d.c=h,d.d=function(c,u,w){d.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:w})},d.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},d.t=function(c,u){if(1&u&&(c=d(c)),8&u||4&u&&typeof c=="object"&&c&&c.__esModule)return c;var w=Object.create(null);if(d.r(w),Object.defineProperty(w,"default",{enumerable:!0,value:c}),2&u&&typeof c!="string")for(var b in c)d.d(w,b,(function(y){return c[y]}).bind(null,b));return w},d.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return d.d(u,"a",u),u},d.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},d.p="",d(d.s=0)}([function(v,h,d){var c;function u(n){return["image/png","image/jpeg","image/gif"].some(a=>a===n)}d.r(h),d.d(h,"canvastoDataURL",function(){return b}),d.d(h,"canvastoFile",function(){return y}),d.d(h,"dataURLtoFile",function(){return j}),d.d(h,"dataURLtoImage",function(){return P}),d.d(h,"downloadFile",function(){return L}),d.d(h,"filetoDataURL",function(){return C}),d.d(h,"imagetoCanvas",function(){return O}),d.d(h,"urltoBlob",function(){return F}),d.d(h,"urltoImage",function(){return _}),d.d(h,"compress",function(){return q}),d.d(h,"compressAccurately",function(){return N}),d.d(h,"EImageType",function(){return c}),function(n){n.PNG="image/png",n.JPEG="image/jpeg",n.GIF="image/gif"}(c||(c={}));var w=function(n,a,t,e){return new(t||(t=Promise))(function(i,o){function m(l){try{g(e.next(l))}catch(r){o(r)}}function f(l){try{g(e.throw(l))}catch(r){o(r)}}function g(l){var r;l.done?i(l.value):(r=l.value,r instanceof t?r:new t(function(x){x(r)})).then(m,f)}g((e=e.apply(n,[])).next())})};function b(n,a=.92,t=c.JPEG){return w(this,void 0,void 0,function*(){return u(t)||(t=c.JPEG),n.toDataURL(t,a)})}function y(n,a=.92,t=c.JPEG){return new Promise(e=>n.toBlob(i=>e(i),t,a))}var z=function(n,a,t,e){return new(t||(t=Promise))(function(i,o){function m(l){try{g(e.next(l))}catch(r){o(r)}}function f(l){try{g(e.throw(l))}catch(r){o(r)}}function g(l){var r;l.done?i(l.value):(r=l.value,r instanceof t?r:new t(function(x){x(r)})).then(m,f)}g((e=e.apply(n,[])).next())})};function j(n,a){return z(this,void 0,void 0,function*(){const t=n.split(",");let e=t[0].match(/:(.*?);/)[1];const i=atob(t[1]);let o=i.length;const m=new Uint8Array(o);for(;o--;)m[o]=i.charCodeAt(o);return u(a)&&(e=a),new Blob([m],{type:e})})}function P(n){return new Promise((a,t)=>{const e=new Image;e.onload=()=>a(e),e.onerror=()=>t(new Error("dataURLtoImage(): dataURL is illegal")),e.src=n})}function L(n,a){const t=document.createElement("a");t.href=window.URL.createObjectURL(n),t.download=a||Date.now().toString(36),document.body.appendChild(t);const e=document.createEvent("MouseEvents");e.initEvent("click",!1,!1),t.dispatchEvent(e),document.body.removeChild(t)}function C(n){return new Promise(a=>{const t=new FileReader;t.onloadend=e=>a(e.target.result),t.readAsDataURL(n)})}var S=function(n,a,t,e){return new(t||(t=Promise))(function(i,o){function m(l){try{g(e.next(l))}catch(r){o(r)}}function f(l){try{g(e.throw(l))}catch(r){o(r)}}function g(l){var r;l.done?i(l.value):(r=l.value,r instanceof t?r:new t(function(x){x(r)})).then(m,f)}g((e=e.apply(n,[])).next())})};function O(n,a={}){return S(this,void 0,void 0,function*(){const t=Object.assign({},a),e=document.createElement("canvas"),i=e.getContext("2d");let o,m;for(const f in t)Object.prototype.hasOwnProperty.call(t,f)&&(t[f]=Number(t[f]));if(t.scale){const f=t.scale>0&&t.scale<10?t.scale:1;m=n.width*f,o=n.height*f}else m=t.width||t.height*n.width/n.height||n.width,o=t.height||t.width*n.height/n.width||n.height;switch([5,6,7,8].some(f=>f===t.orientation)?(e.height=m,e.width=o):(e.height=o,e.width=m),t.orientation){case 3:i.rotate(180*Math.PI/180),i.drawImage(n,-e.width,-e.height,e.width,e.height);break;case 6:i.rotate(90*Math.PI/180),i.drawImage(n,0,-e.width,e.height,e.width);break;case 8:i.rotate(270*Math.PI/180),i.drawImage(n,-e.height,0,e.height,e.width);break;case 2:i.translate(e.width,0),i.scale(-1,1),i.drawImage(n,0,0,e.width,e.height);break;case 4:i.translate(e.width,0),i.scale(-1,1),i.rotate(180*Math.PI/180),i.drawImage(n,-e.width,-e.height,e.width,e.height);break;case 5:i.translate(e.width,0),i.scale(-1,1),i.rotate(90*Math.PI/180),i.drawImage(n,0,-e.width,e.height,e.width);break;case 7:i.translate(e.width,0),i.scale(-1,1),i.rotate(270*Math.PI/180),i.drawImage(n,-e.height,0,e.height,e.width);break;default:i.drawImage(n,0,0,e.width,e.height)}return e})}function F(n){return fetch(n).then(a=>a.blob())}function _(n){return new Promise((a,t)=>{const e=new Image;e.onload=()=>a(e),e.onerror=()=>t(new Error("urltoImage(): Image failed to load, please check the image URL")),e.src=n})}var k=function(n,a,t,e){return new(t||(t=Promise))(function(i,o){function m(l){try{g(e.next(l))}catch(r){o(r)}}function f(l){try{g(e.throw(l))}catch(r){o(r)}}function g(l){var r;l.done?i(l.value):(r=l.value,r instanceof t?r:new t(function(x){x(r)})).then(m,f)}g((e=e.apply(n,[])).next())})};function q(n,a={}){return k(this,void 0,void 0,function*(){if(!(n instanceof Blob))throw new Error("compress(): First arg must be a Blob object or a File object.");if(typeof a!="object"&&(a=Object.assign({quality:a})),a.quality=Number(a.quality),Number.isNaN(a.quality))return n;const t=yield C(n);let e=t.split(",")[0].match(/:(.*?);/)[1],i=c.JPEG;u(a.type)&&(i=a.type,e=a.type);const o=yield P(t),m=yield O(o,Object.assign({},a)),f=yield b(m,a.quality,i),g=yield j(f,e);return g.size>n.size?n:g})}function N(n,a={}){return k(this,void 0,void 0,function*(){if(!(n instanceof Blob))throw new Error("compressAccurately(): First arg must be a Blob object or a File object.");if(typeof a!="object"&&(a=Object.assign({size:a})),a.size=Number(a.size),Number.isNaN(a.size)||1024*a.size>n.size)return n;a.accuracy=Number(a.accuracy),(!a.accuracy||a.accuracy<.8||a.accuracy>.99)&&(a.accuracy=.95);const t=a.size*(2-a.accuracy)*1024,e=1024*a.size,i=a.size*a.accuracy*1024,o=yield C(n);let m=o.split(",")[0].match(/:(.*?);/)[1],f=c.JPEG;u(a.type)&&(f=a.type,m=a.type);const g=yield P(o),l=yield O(g,Object.assign({},a));let r,x=.5;const B=[null,null];for(let E=1;E<=7;E++){r=yield b(l,x,f);const M=.75*r.length;if(E===7){(t<M||i>M)&&(r=[r,...B].filter(D=>D).sort((D,Q)=>Math.abs(.75*D.length-e)-Math.abs(.75*Q.length-e))[0]);break}if(t<M)B[1]=r,x-=Math.pow(.5,E+1);else{if(!(i>M))break;B[0]=r,x+=Math.pow(.5,E+1)}}const T=yield j(r,m);return T.size>n.size?n:T})}}])})}(U)),U.exports}var G,J;function X(){return J||(J=1,G=W()),G}var Y=X();const K=p.lazy(()=>H(()=>import("./ButtonForImages-CTRLgRDC.js"),__vite__mapDeps([0,1,2,3]))),ee=()=>{const[I,R]=p.useState(""),[v,h]=p.useState(null),[d,c]=p.useState(""),[u,w]=p.useState(!1),[b,y]=p.useState(""),[z,j]=p.useState(.9),[P,L]=p.useState(0),[C,S]=p.useState(0),[O,F]=p.useState(!1),[_,k]=p.useState([]),[q,N]=p.useState(!1),[n,a]=p.useState(Date.now());p.useEffect(()=>{v&&(R(""),S(0),N(!1))},[v]);async function t(o){const m=o.target.files[0];c(URL.createObjectURL(m)),h(m),y(m.name),w(!0),L(m.size)}async function e(){if(!v){alert("Please upload an image first!");return}try{N(!1),F(!0);const o=await Y.compress(v,{quality:z,width:"100%",height:"100%"});R(URL.createObjectURL(o)),S(o.size),k([..._,{link:I,name:b}]),setTimeout(()=>{F(!1),N(!0)},2e3)}catch(o){console.error("Image compression failed:",o),alert("Image compression failed. Please try again!")}}function i(){c(""),h(null),w(!1),y(""),j(.9),L(0),S(0),R(""),N(!1),a(Date.now())}return s.jsxs(V.Fragment,{children:[s.jsx("div",{className:"container text-center",children:s.jsx("div",{className:"row",children:b?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 pt-1 pb-1",children:[s.jsx("label",{className:"fs-6 fw-medium lh-base pt-1 pb-1",htmlFor:"qualitySlider",children:"Quality:"}),s.jsx("div",{className:"fs-6 fw-medium lh-base",children:s.jsx("input",{id:"qualitySlider",type:"range",min:"0.1",max:"1",step:"0.1",value:z,onChange:o=>j(parseFloat(o.target.value)),className:"w-100"})})]}),s.jsxs("div",{className:"col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 pt-1 pb-1",children:[s.jsx("div",{className:"fs-6 fw-medium lh-base",children:"Orginal size:"}),s.jsxs("div",{className:"fs-6 fw-normal lh-base",children:[Math.round(P/1024)," KB"]})]}),s.jsxs("div",{className:"col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 pt-1 pb-1",children:[s.jsx("div",{className:"fs-6 fw-medium lh-base",children:"Compressed size:"}),s.jsxs("div",{className:"fs-6 fw-normal lh-base",children:[Math.round(C/1024)," KB"]})]}),s.jsx("div",{className:"container mt-2 text-center",children:s.jsxs("div",{className:"row g-2",children:[s.jsx("div",{className:"col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6",children:s.jsx(K,{buttonType:"download",onClick:e,children:"Compress image"})}),s.jsx("div",{className:"col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6",children:s.jsx(K,{buttonType:"reset",onClick:i,children:"Reset compressor"})})]})})]}):s.jsx(s.Fragment,{children:s.jsx("div",{className:"container text-center customClass",children:s.jsx("div",{className:"row",children:s.jsxs("div",{className:"col-12",children:[s.jsx("div",{className:"spinner-grow spinner-grow-sm text-danger",children:s.jsx("span",{className:"visually-hidden",children:"...in progress"})}),s.jsx("div",{className:"spinner-grow spinner-grow-sm text-warning ms-2 me-2",children:s.jsx("span",{className:"visually-hidden",children:"...in progress"})}),s.jsx("div",{className:"spinner-grow spinner-grow-sm text-success",children:s.jsx("span",{className:"visually-hidden",children:"...in progress"})})]})})})})})}),s.jsx("div",{className:"container mt-2 mb-2",children:s.jsxs("div",{className:"row g-2",children:[s.jsx("div",{className:"col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 text-center",children:s.jsx("div",{className:"card border-0",children:s.jsxs("div",{className:"card-body m-0 p-2",children:[s.jsxs("p",{className:"card-title text-center fs-6 fw-medium lh-base",children:[s.jsx("i",{className:"bi bi-image pe-2"}),"Original image: .jpg, / .bmp, / .avif / .jfif"]}),u?s.jsx("img",{src:d,className:"img-fluid mt-0 mb-2",alt:"image"}):s.jsx(s.Fragment,{}),s.jsx("div",{className:"input-group",children:s.jsx("input",{id:"choseFileToCompress",type:"file",accept:"image/jpeg, image/avif, image/bmp, image/jfif",onChange:o=>t(o),className:"form-control fs-6 fw-medium lh-base shadow-none border border-secondary"},n)})]})})}),s.jsx("div",{className:"col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 text-center",children:s.jsx("div",{className:"card border-0",children:s.jsxs("div",{className:"card-body m-0 p-2",children:[s.jsxs("p",{className:"card-title text-center fs-6 fw-medium lh-base",children:[s.jsx("i",{className:"bi bi-image-fill pe-2"}),"Compressed image"]}),q?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:I,className:"img-fluid mt-0 mb-2",alt:"image"}),s.jsx("a",{href:I,download:b,className:"btn btn-success fs-6 fw-medium lh-base w-100",children:"Download image"})]}):s.jsx("div",{className:"text-center pt-2 pb-3",children:O?s.jsxs("div",{className:"fs-6 fw-medium lh-base pt-2",children:[s.jsx("div",{className:"spinner-grow spinner-grow-sm text-danger",children:s.jsx("span",{className:"visually-hidden",children:"...in progress"})}),s.jsx("div",{className:"spinner-grow spinner-grow-sm text-warning ms-2 me-2",children:s.jsx("span",{className:"visually-hidden",children:"...in progress"})}),s.jsx("div",{className:"spinner-grow spinner-grow-sm text-success",children:s.jsx("span",{className:"visually-hidden",children:"...in progress"})})]}):s.jsx("div",{})})]})})})]})})]})};export{ee as default};
